
// go generate
// GENERATED BY THE COMMAND ABOVE; DO NOT EDIT
// This file was generated by robots at
// {{ .Timestamp }}
//code for table {{.Table}}

package gener


import (
	"restfest/db"
)

type {{title .Table}}Params struct {
	Length int
	Offset int
}


type {{title .Table}} struct {
  {{- range .Cols  }}
    {{title .Column}} {{.ColumnTrans}}  `json:{{printf "%q" .Column}}`
    {{- end }}
}



func SQL{{title .Table}}(tab string,flag db.SQLOper)[]interface{}{
  x :=   {{printf "%q" (joiner .ColumnsT)}}

  switch flag{
    case db.GenSelect:
    return []interface{}{
    x,
      tab,
      {{printf "%q" .PK}},
    }
    case db.GenInsert:
    return    []interface{}{ tab,
       {{printf "%q" (joiner .ColumnsInsert)  }}  ,
       {{printf "%q" (joiner .BindsInsert)  }} ,
        x,
      }
    default:
      return    []interface{}{ tab,
        {{printf "%q" (joiner .BindsUpdate)}}  ,
        {{printf "%q" .PKBind}},
      x,
        }

  }

}


func Empty{{title .Table}}() interface{}{
    return new({{title .Table}})
}


func EmptyParam{{title .Table}}() interface{}{
    return new({{title .Table}}Params)
}

func Scanner{{title .Table}}()( []interface{}, interface{}){
	struT := new({{title .Table}})

return  []interface{}{				{{- range .Cols  }}
				&struT.{{title .Column}},
				{{- end }}
			}, struT

}


func ScannerT{{title .Table}}()( []interface{},*{{title .Table}}){
	struT := new({{title .Table}})

return  []interface{}{				{{- range .Cols  }}
				&struT.{{title .Column}},
				{{- end }}
			}, struT

}


func ROWInsert{{title .Table}}(inter interface{})[]interface{}{
  rt := inter.( *{{title .Table}} )
  return []interface{}{
	{{- range .BindsVarInsert  }}
	&rt.{{title .}},
	{{- end }}  }

}


func ROWQuery{{title .Table}}(inter interface{})[]interface{}{
  rt := inter.( *{{title .Table}}Params )
		if rt.Length == 0 {
			rt.Length = 100
		}

  return []interface{}{
&rt.Length,
&rt.Offset  }

}
